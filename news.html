<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8">
  <title>News & Blog — Neuroflight Lab</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="News, achievements, and job posts.">
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/components.css">
  <link rel="stylesheet" href="/css/animations.css">
</head>
<body>
  <header class="site-header">
    <a class="logo" href="/">Neuroflight Lab</a>
    <nav class="nav">
      <a href="/administration.html">Administration</a>
      <a href="/innovation.html">Innovation & Research</a>
      <a href="/software.html">Software</a>
      <a href="/news.html" aria-current="page">News</a>
      <a class="btn" href="/contact.html">Contact</a>
    </nav>
  </header>

  <main class="section">
    <h1>News & Blog</h1>

    <div id="newsFilters" class="filters">
      <button data-type="all" class="chip active">All</button>
      <button data-type="news" class="chip">News</button>
      <button data-type="achievement" class="chip">Achievement</button>
      <button data-type="job" class="chip">Job</button>
    </div>

    <div id="newsFeed" class="news-grid"></div>

    <hr class="divider">

    <section class="login-area">
      <h2>Login to Post</h2>

      <!-- Guest: login form -->
      <form id="loginForm" class="form row guest-only">
        <input type="text" name="username" placeholder="Username" required>
        <input type="password" name="password" placeholder="Password" required>
        <button class="btn" type="submit">Login</button>
        <span id="loginMsg" class="muted"></span>
      </form>

      <!-- Authed: post form -->
      <form id="postForm" class="form column authed-only" style="display:none">
        <div class="row">
          <input type="text" name="title" placeholder="Post title" required>
          <select name="type" required>
            <option value="news">News</option>
            <option value="achievement">Achievement</option>
            <option value="job">Job</option>
          </select>
        </div>
        <textarea name="body" rows="5" placeholder="Write your post..." required></textarea>
        <div class="row">
          <input type="file" name="image" accept="image/*">
          <button class="btn" type="submit">Publish</button>
        </div>
        <span class="muted">Publishes to data/news.json for everyone.</span>
      </form>
    </section>
  </main>

  <footer class="site-footer"><p>© <span id="year"></span> Neuroflight Lab</p></footer>

  <!-- Correct script order: auth first (login + submit), then news (render) -->
  <script>
    // year
    document.addEventListener('DOMContentLoaded', ()=> {
      const y = document.getElementById('year');
      if(y) y.textContent = new Date().getFullYear();
    });
  </script>

  <script src="/js/config.local.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/news.js"></script>

</body>
</html>

